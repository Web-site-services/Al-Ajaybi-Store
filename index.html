<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8"/>
  <title>Ù…ØªØ¬Ø± Ø§Ù„Ø¹Ø¬Ø§ÙŠØ¨ÙŠ - Ø¥Ø¯Ø§Ø±Ø© ÙˆØ´Ø±Ø§Ø¡ Ùˆ Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <!-- SEO Meta Tags -->
  <meta name="description" content="Ù…ØªØ¬Ø± Ø§Ù„Ø¹Ø¬Ø§ÙŠØ¨ÙŠ: Ø¥Ø¯Ø§Ø±Ø© ÙˆØ´Ø±Ø§Ø¡ ÙˆØªØ®Ø²ÙŠÙ† Ø§Ø­ØªØ±Ø§ÙÙŠ Ù„Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…ÙƒØªØ¨ÙŠØ© ÙˆØ§Ù„Ù…Ø¯Ø±Ø³ÙŠØ©. ØªØ³ÙˆÙ‚ Ø¯ÙØ§ØªØ±ØŒ Ø£Ù‚Ù„Ø§Ù…ØŒ Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª Ù…ÙƒØªØ¨ÙŠØ©ØŒ Ø¹Ø±ÙˆØ¶ Ø­ØµØ±ÙŠØ© ÙˆØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹. Ø§Ø·Ù„Ø¨ Ø¹Ø¨Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø£Ùˆ ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ØŒ ÙÙŠØ³Ø¨ÙˆÙƒØŒ ØªÙˆÙŠØªØ±ØŒ Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù….">
  <meta name="keywords" content="Ù…ØªØ¬Ø± Ø§Ù„Ø¹Ø¬Ø§ÙŠØ¨ÙŠ, Ø£Ø¯ÙˆØ§Øª Ù…ÙƒØªØ¨ÙŠØ©, Ù‚Ø±Ø·Ø§Ø³ÙŠØ©, Ø´Ø±Ø§Ø¡, Ø¥Ø¯Ø§Ø±Ø© Ù…Ø®Ø²ÙˆÙ†, ØªØ³ÙˆÙ‚, Ø·Ù„Ø¨Ø§Øª, Ù…Ø®Ø²Ù†, Ø¬Ù…Ù„Ø©, ØªØ¬Ø²Ø¦Ø©, Ø¹Ø±ÙˆØ¶, Ø¯ÙØ§ØªØ±, Ø£Ù‚Ù„Ø§Ù…, ÙˆØ±Ù‚, Ù…ÙƒØªØ¨Ø©, ØªÙˆØµÙŠÙ„, WhatsApp, Facebook, Twitter, Instagram, TikTok, Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§">
  <meta property="og:title" content="Ù…ØªØ¬Ø± Ø§Ù„Ø¹Ø¬Ø§ÙŠØ¨ÙŠ - Ø¥Ø¯Ø§Ø±Ø© ÙˆØ´Ø±Ø§Ø¡ ÙˆØªØ®Ø²ÙŠÙ† Ø§Ø­ØªØ±Ø§ÙÙŠ">
  <meta property="og:description" content="ØªØ³ÙˆÙ‚ Ø£ÙØ¶Ù„ Ø£Ø¯ÙˆØ§Øª Ù…ÙƒØªØ¨ÙŠØ© ÙˆÙ…Ø¯Ø±Ø³ÙŠØ©ØŒ ÙˆØ§Ø·Ù„Ø¨ Ø¨Ø³Ù‡ÙˆÙ„Ø© Ø¹Ø¨Ø± ÙƒØ§ÙØ© Ù…Ù†ØµØ§Øª Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ.">
  <meta property="og:url" content="https://yourcompany.com/">
  <meta property="og:site_name" content="Ù…ØªØ¬Ø± Ø§Ù„Ø¹Ø¬Ø§ÙŠØ¨ÙŠ">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://i.imgur.com/Vp5j7dH.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Ù…ØªØ¬Ø± Ø§Ù„Ø¹Ø¬Ø§ÙŠØ¨ÙŠ - Ø¥Ø¯Ø§Ø±Ø© ÙˆØ´Ø±Ø§Ø¡ ÙˆØªØ®Ø²ÙŠÙ† Ø§Ø­ØªØ±Ø§ÙÙŠ">
  <meta name="twitter:description" content="Ø­Ù„ÙˆÙ„ Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…ÙƒØªØ¨ÙŠØ© ÙˆØ§Ù„Ù…Ø¯Ø±Ø³ÙŠØ© ÙˆØ§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹ ÙˆØ®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¹Ø¨Ø± Ø¬Ù…ÙŠØ¹ Ù‚Ù†ÙˆØ§Øª Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§.">
  <meta name="twitter:image" content="https://i.imgur.com/Vp5j7dH.png">
  <link rel="canonical" href="https://yourcompany.com/">
  <link rel="icon" href="https://i.imgur.com/Vp5j7dH.png">
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap" rel="stylesheet">
  <style>
    body {font-family: 'Cairo', Arial, sans-serif; background: #f5f9fa; margin:0; color:#252525;}
    header {background: linear-gradient(90deg, #4a7c59 80%, #7bcfae 100%); color: #fff; padding: 22px 0 18px 0; text-align: center; border-bottom-left-radius: 28px; border-bottom-right-radius: 28px; box-shadow: 0 3px 22px #4a7c5910; position:relative;}
    .header-btns-top {
      position: absolute;
      left: 18px;
      top: 18px;
      display: flex;
      gap: 14px;
      z-index: 10;
      transition: opacity .2s;
    }
    .header-btns-top button {
      background: #fff;
      color: #4a7c59;
      border: none;
      padding: 9px 19px;
      border-radius: 22px;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 0 8px #0001;
      transition: background 0.15s;
    }
    .header-btns-top button:hover {background:#d3e7db;}
    main {max-width: 1250px; margin: 38px auto 24px auto; background: #fff; border-radius: 22px; box-shadow: 0 8px 44px #4a7c5916; padding: 32px 14px 24px 14px; min-height:650px;}
    .notif-bar {font-size: 16px; color: #fff; background: #c0392b; padding: 8px 16px; border-radius: 8px; margin-bottom: 13px; text-align: center; font-weight: bold; display: none;}
    .notif-bar.visible {display: block;}

    /* Ø´Ø§Ø´Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª */
    .client-card, .client-form-container {
      margin: 0 auto 26px auto;
      background: #e0f2f1;
      border-radius: 15px;
      width: 340px;
      max-width: 95vw;
      box-shadow: 0 0 18px #0001;
      padding: 23px 15px 25px 15px;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      animation: fadeInDown 0.4s;
      transition: box-shadow 0.15s;
      justify-content: center;
    }
    .client-form-container {background: #e0f8f2;}
    .client-contact-mid {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin: 0 auto;
      min-height: 240px;
    }
    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-30px);}
      to { opacity: 1; transform: translateY(0);}
    }
    .client-card h3, .client-form h3 {margin-top:0; font-size: 20px; color: #25764b;}
    .client-card .edit-btn {position:absolute;left:10px;top:10px;background:#4a7c59;color:#fff;padding:4px 15px;border-radius:16px;border:none;font-size:15px;cursor:pointer;}
    .client-card .edit-btn:hover {background:#2a4c39;}
    .client-card label{display:inline-block;font-weight:700;width:85px;text-align:right;}
    .client-card .val{display:inline-block;width:210px;font-weight:400;text-align:right;}
    .client-form {width:100%; display:flex; flex-direction:column; align-items:center; gap:4px;}
    .client-form label {display:block;margin:14px 0 6px 0;font-weight:700;font-size:15px; color:#3e6a4b;text-align:right;width:100%;}
    .client-form input {
      width:100%;padding:8px 10px;border-radius:6px;border:1.2px solid #b2dfdb;
      margin-bottom:2px; font-size:15px; background:#f8fcfa; transition: border 0.2s;
      box-sizing: border-box;
    }
    .client-form input:focus {border:1.2px solid #4a7c59; outline:none;}
    .client-form button {
      width:100%;background:#4a7c59;color:#fff;border:none;padding:12px 0;border-radius:8px;
      font-size:17px;margin-top:15px;font-weight:bold;transition:background 0.14s;
      letter-spacing:1px;
    }
    .client-form button:hover {background: #388e3c;}
    .client-form .to-shop-btn {background: #25764b; color: #fff;}
    .client-form .to-shop-btn:hover {background: #1a513a;}
    .client-form .form-title {
      font-size: 22px;
      font-weight: 700;
      color: #24704b;
      margin-bottom: 7px;
      margin-top: 0;
      letter-spacing: 1px;
      text-align:center;
    }
    .flex {display:flex;gap:38px;flex-wrap:wrap;align-items:flex-start;}
    aside.filters {
      flex:0 0 265px;
      background: #f4f8fb;
      border-radius: 12px;
      box-shadow: 0 0 11px #0001;
      padding: 22px 16px 28px 16px;
      min-width: 230px;
      position: relative;
    }
    aside.filters h3 {margin:0 0 18px 0; font-weight:700; color:#3e6a4b;}
    .filter-group {border-bottom:1px solid #e0e0e0;margin-bottom:8px;}
    .filter-main {
      display:flex;align-items:center;font-size:16px;font-weight:700;cursor:pointer;padding:5px 0;
    }
    .filter-main .toggle {
      font-size:22px;display:inline-block;width:24px;text-align:center;margin-left:4px;color:#4a7c59;
      font-weight: bold;
    }
    .filter-main .main-label{flex:1;}
    .sub-filters {margin:5px 0 0 0;padding-right:13px;display:none;}
    .sub-filters.active{display:block;}
    .sub-filters label {display:flex;align-items:center;font-size:15px;font-weight:400;margin-bottom:3px;cursor:pointer;}
    .sub-filters input[type=checkbox]{margin-left:8px;}
    .num-prod {display:block;font-size:15px;color:#4a7c59;padding:8px 0 3px 0;font-weight:bold;}
    .filters-btns {margin-bottom:8px;}
    .filters-btns button {background:#7bcfae;color:#fff;border:none;padding:5px 13px;border-radius:8px;font-size:15px;cursor:pointer;margin-left:7px;}
    .filters-btns button:hover {background:#4a7c59;}
    .product-search-container {
      margin: 7px 0 14px 0;
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .product-search-box {
      font-family: inherit;
      direction: rtl;
      background: #fff;
      border: 1.2px solid #b2dfdb;
      border-radius: 11px;
      padding: 9px 16px 9px 35px;
      font-size: 16px;
      color: #25764b;
      width: 97%;
      box-sizing: border-box;
      outline: none;
      transition: border 0.18s;
      box-shadow: 0 0 7px #0001;
    }
    .product-search-box:focus {
      border-color: #4a7c59;
    }
    .search-icon {
      position: relative;
      right: -32px;
      font-size: 19px;
      color: #4a7c59;
      pointer-events: none;
      top: 1px;
      margin-left: -29px;
    }
    .products {flex: 1 1 400px; display:flex; flex-wrap:wrap; gap:28px; min-width:320px; position:relative;}
    .products .back-btn {
      position: absolute;
      left: 0;
      top: 0;
      background: #fff;
      color: #4a7c59;
      border: none;
      padding: 8px 19px;
      border-radius: 20px;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 0 8px #0001;
      margin: 8px 0 0 10px;
      z-index: 5;
      transition: background 0.14s;
    }
    .products .back-btn:hover {background: #d3e7db;}
    .products .show-order-btn {
      position: absolute;
      left: 0;
      top: 50px;
      background: #fff;
      color: #4a7c59;
      border: none;
      padding: 8px 19px;
      border-radius: 20px;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 0 8px #0001;
      margin: 8px 0 0 10px;
      z-index: 5;
      transition: background 0.14s;
    }
    .products .show-order-btn:hover {background: #d3e7db;}
    .products .to-inventory-btn {
      position: absolute;
      left: 0;
      top: 100px;
      background: #25764b;
      color: #fff;
      border: none;
      padding: 8px 19px;
      border-radius: 20px;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 0 8px #0001;
      margin: 8px 0 0 10px;
      z-index: 5;
      transition: background 0.14s;
    }
    .products .to-inventory-btn:hover {background: #388e3c;}
    .product {background:#f7fdfc;border:1.7px solid #b2dfdb;border-radius:10px;box-shadow:0 2px 13px #0001;width:200px;text-align:center;padding:13px 7px 16px 7px;min-height:320px;display:flex;flex-direction:column;align-items:center;}
    .product img {width:100%;height:110px;object-fit:contain;border-radius:8px;margin-bottom:10px;background:#e0f2f1;}
    .product h4 {font-size:17px;margin:0 0 8px 0;color:#25764b;font-weight:700;}
    .product .not-available {color: #c0392b;font-size:15px;font-weight:700; margin:10px 0 6px 0;}
    .product .in-stock {color: #388e3c;font-size:14px;margin-top:0;font-weight:700;margin-bottom:6px;}
    .product .qty-row {display:flex;align-items:center;gap:6px;justify-content:center;}
    .product .qty-row input[type=number] {width:48px;padding:1px 4px;border-radius:3px;border:1px solid #bbb;text-align:center;font-size:15px;}
    .product button {background:#4a7c59;color:#fff;border:none;padding:8px 14px;border-radius:5px;font-size:15px;cursor:pointer;margin-top:12px;font-weight:700;}
    .product button:disabled {background:#b0b0b0;cursor:not-allowed;color:#eee;}
    .product button:hover:not(:disabled) {background:#3e6a4b;}
    .product .price {font-size:15.5px;color:#2d5e4c;font-weight:700;margin-bottom:7px;}
    .cart-section {margin-top:30px;background:#e7f7f1;border-radius:13px;padding:22px 18px 12px 18px;box-shadow:0 0 14px #0001;max-width:820px;margin-right:auto;margin-left:auto;}
    .cart-section h3 {margin-top:0;color:#4a7c59;letter-spacing:1px;font-weight:700;}
    .cart-table {width:100%;border-collapse:collapse;background:#fff;border-radius:9px;margin-bottom:15px;overflow:hidden;box-shadow:0 1px 7px #0001;}
    .cart-table th, .cart-table td {border:1px solid #bfd9ce;padding:9px 6px;text-align:center;font-size:15.5px;}
    .cart-table th {background:#4a7c59;color:#fff;font-weight:700;font-size:16.5px;}
    .cart-table td button {background:#b94a48;font-size:13px;padding:2px 11px;border-radius:5px;color:#fff;border:none;cursor:pointer;font-weight:bold;}
    .cart-table td button:hover {background:#8c3b39;}
    .cart-total {font-size:20px;color:#3e6a4b;font-weight:bold;text-align:left;margin-top:8px;margin-bottom:17px;}
    .cart-actions {display:flex;gap:15px;flex-wrap:wrap;margin-bottom:8px;justify-content:flex-end;}
    .cart-actions button {background:#4a7c59;color:#fff;border:none;padding:11px 0;border-radius:6px;font-size:16px;cursor:pointer;font-weight:700;letter-spacing:1px;transition:background 0.17s;}
    .cart-actions button:hover {background:#3e6a4b;}
    /* Ø´Ø§Ø´Ø© Ø£Ù…Ø± Ø§Ù„Ø´Ø±Ø§Ø¡ */
    .order-html-modal-bg {position:fixed;top:0;left:0;width:100vw;height:100vh;background:#0007;z-index:90;display:flex;align-items:center;justify-content:center;}
    .order-html-modal-bg.hidden {display:none;}
    .order-html-modal {
      background:#fff;border-radius:16px;box-shadow:0 12px 48px #0005;
      min-width:320px;
      max-width:900px;
      width:96vw;
      position:relative;
      padding:30px 35px 18px 35px;
      direction:rtl;
      animation:popIn 0.22s;
      max-height:80vh;
      overflow-y:auto;
      /* scrollbar for modal */
      scrollbar-width: thin;
      scrollbar-color: #4a7c59 #e0f8f2;
    }
    .order-html-modal .close-modal {position:absolute;top:13px;left:12px;font-size:22px;background:#eee;color:#c0392b;border:none;border-radius:50%;width:36px;height:36px;cursor:pointer;font-weight:bold;}
    .order-html-modal .close-modal:hover {background:#fde2e2;}
    .order-html-modal h3 {margin-top:0;color:#4a7c59;font-weight:700;text-align:center;}
    .order-html-modal table {width:100%;border-collapse:collapse;margin-bottom:12px;font-size:19px;border-radius:10px;box-shadow:0 2px 10px #4a7c5950;}
    .order-html-modal th, .order-html-modal td {border: 1.5px solid #b2dfdb; padding: 13px 10px; text-align: center;}
    .order-html-modal th {background: #4a7c59; color: #fff; font-weight: 800; font-size: 21px;}
    .order-html-modal .total-row td {font-weight:bold;font-size:20px;color:#c0392b;background:#f7f7f7;}
    .order-html-modal .order-customer {background:#f2f8f3;border-radius:7px;padding:13px 10px;margin-bottom:10px;font-size:17px;}
    .order-html-modal .order-date {text-align:left;font-size:15.5px;color:#444;margin-bottom:8px;font-style:italic;}
    .order-html-modal .order-modal-btns {display:flex;gap:10px;justify-content:center;margin:14px 0 3px 0;flex-wrap:wrap;}
    .order-html-modal .order-modal-btns button {background:#4a7c59;color:#fff;border:none;padding:10px 14px;border-radius:8px;font-size:17px;cursor:pointer;font-weight:700;transition:background 0.18s;margin-bottom:4px;}
    .order-html-modal .order-modal-btns button:hover {background:#3e6a4b;}
    @keyframes popIn {from {transform: scale(0.92);}to {transform: scale(1);}}

    /* Ø´Ø§Ø´Ø© Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø®Ø²Ù† */
    #inventoryArea {display:none; margin-top: 8px;}
    .inventory-flex {display: flex; gap: 36px; flex-wrap: wrap; align-items:flex-start;}
    .inventory-filters {
      flex:0 0 265px;
      background: #f4f8fb;
      border-radius: 12px;
      box-shadow: 0 0 11px #0001;
      padding: 22px 16px 28px 16px;
      min-width: 230px;
      position: relative;
    }
    .inventory-filters h3 {margin:0 0 18px 0; font-weight:700; color:#3e6a4b;}
    .inventory-num-prod {display:block;font-size:15px;color:#4a7c59;padding:8px 0 3px 0;font-weight:bold;}
    .inventory-filters .filters-btns button {background:#7bcfae;color:#fff;border:none;padding:5px 13px;border-radius:8px;font-size:15px;cursor:pointer;margin-left:7px;}
    .inventory-filters .filters-btns button:hover {background:#4a7c59;}
    .inventory-product-search-container {
      margin: 7px 0 14px 0;
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .inventory-product-search-box {
      font-family: inherit;
      direction: rtl;
      background: #fff;
      border: 1.2px solid #b2dfdb;
      border-radius: 11px;
      padding: 9px 16px 9px 35px;
      font-size: 16px;
      color: #25764b;
      width: 97%;
      box-sizing: border-box;
      outline: none;
      transition: border 0.18s;
      box-shadow: 0 0 7px #0001;
    }
    .inventory-product-search-box:focus {
      border-color: #4a7c59;
    }
    .inventory-products-area {flex: 1 1 400px; min-width:320px; position:relative;}
    .inventory-controls {display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 18px; justify-content: flex-end;}
    .inventory-controls button {background:#4a7c59;color:#fff;border:none;padding:8px 18px;border-radius:8px;font-size:15px;font-weight:700;cursor:pointer;transition:background 0.14s;}
    .inventory-controls button:hover {background:#3e6a4b;}
    .inventory-controls input[type=file]{display:none;}
    .inventory-table-wrapper {max-height: 440px; overflow-y: auto; border-radius: 12px; border: 1.4px solid #b2dfdb; background: #f7fdfc; box-shadow: 0 1px 7px #0001;}
    .inventory-table {border-collapse: collapse; width: 100%;}
    .inventory-table th, .inventory-table td {border: 1px solid #b2dfdb; padding: 10px 6px; text-align: center; font-size: 15.5px;}
    .inventory-table th {background: #4a7c59; color: #fff; font-weight: 700; font-size: 16px;}
    .inventory-table td img {width:44px;height:36px;object-fit:cover;border-radius:7px;}
    .inventory-table td button {background: #4a7c59; color: #fff; border: none; padding: 5px 10px; border-radius: 6px; font-size: 15px; font-weight:700; cursor: pointer; transition:background 0.15s;}
    .inventory-table td button.del {background: #b94a48;}
    .inventory-table td button.del:hover{background:#8c3b39;}
    .inventory-table td button:hover {background:#3e6a4b;}
    .pagination-bar {
      display: flex; justify-content: center; align-items: center; gap: 7px; margin: 22px 0 0 0; flex-wrap: wrap;
    }
    .pagination-bar button {
      background: #e0f8f2;
      border: 1px solid #b2dfdb;
      color: #25764b;
      font-weight: 700;
      padding: 6px 13px;
      border-radius: 7px;
      font-size: 15px;
      cursor: pointer;
      transition: background 0.14s;
    }
    .pagination-bar button.active, .pagination-bar button:focus {
      background: #25764b;
      color: #fff;
      border-color: #25764b;
    }
    .pagination-bar button:hover:not(.active) {
      background: #b2dfdb;
    }
    .pagination-bar span {
      font-size: 15px;
      color: #4a7c59;
      padding: 0 7px;
      font-weight: bold;
    }

    /* Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„ ØµÙ†Ù */
    .inventory-modal-bg {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: #0007;
      z-index: 2000;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: fadeInDown 0.22s;
      overflow-y: auto;
      scrollbar-width: thin;
      scrollbar-color: #4a7c59 #e0f8f2;
    }
    .inventory-modal {
      background: #fff;
      border-radius: 24px;
      box-shadow: 0 12px 48px #0005;
      min-width: 330px;
      max-width: 99vw;
      width: 400px;
      position: relative;
      padding: 26px 24px 18px 24px;
      direction: rtl;
      animation: popIn 0.22s;
      overflow-y: auto;
      max-height: 95vh;
      scrollbar-width: thin;
      scrollbar-color: #4a7c59 #e0f8f2;
    }
    .inventory-modal::-webkit-scrollbar {
      width: 8px;
    }
    .inventory-modal::-webkit-scrollbar-thumb {
      background: #4a7c59;
      border-radius: 7px;
    }
    .inventory-modal::-webkit-scrollbar-track {
      background: #e0f8f2;
    }
    .inventory-modal h2 {margin:0 0 22px 0; color:#4a7c59;font-weight:700;text-align:center;}
    .inventory-modal .close-modal {
      position: absolute; top: 14px; left: 12px;
      font-size: 23px;
      background: #eee;
      color: #c0392b;
      border: none;
      border-radius: 50%;
      width: 37px; height: 37px;
      cursor: pointer; font-weight: bold;
      transition: background 0.13s;
    }
    .inventory-modal .close-modal:hover {background:#fde2e2;}
    .inventory-add-edit-form label {display:block; margin:12px 0 4px 0; font-weight:700;color:#4a7c59;}
    .inventory-add-edit-form input {
      width: 100%; padding: 10px 11px; font-size: 15px; margin-bottom: 2px; border-radius: 8px;
      border: 1.5px solid #b2dfdb; font-family: inherit; background: #f7fdfc; transition: border 0.18s;
    }
    .inventory-add-edit-form input:focus {border:1.5px solid #4a7c59;}
    .inventory-add-edit-form .modal-btns {margin-top:18px;display:flex;gap:13px;justify-content:flex-end;}
    .inventory-add-edit-form .modal-btns button {
      font-size:15px; padding:9px 21px; border-radius:9px; font-weight:700;
      border:none;
      cursor:pointer;
      background: #25764b;
      color: #fff;
      transition: background 0.16s;
    }
    .inventory-add-edit-form .modal-btns button:last-child {background:#b94a48;}
    .inventory-add-edit-form .modal-btns button:hover {opacity:0.93;}
    /* Ù†Ù‡Ø§ÙŠØ© Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„ */

    /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø¹Ø±Ø¶ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
    @media (max-width: 1050px) {.client-card, .client-form-container{width:99vw;}}
    @media (max-width: 950px) {
      .flex, .inventory-flex {flex-direction:column;}
      aside.filters, .inventory-filters {max-width: 98vw; margin-bottom: 18px;}
      .main {padding: 8vw 1vw;}
    }
    @media (max-width: 650px) {
      .client-card, .client-form-container {width:96vw;}
      .products .back-btn, .products .show-order-btn {left: 0; top: 0; margin-top: 8px;}
      .products .show-order-btn {top: 45px;}
      .products .to-inventory-btn {top: 90px;}
      .inventory-modal{width:99vw;padding:10px 1vw 8px 1vw; min-width: 95vw;}
      .order-html-modal {width:99vw;padding:10px 1vw 8px 1vw;}
      .main {padding: 3vw 1vw;}
    }
    /* Scrollbars for modal and main for touch devices */
    @media (max-width: 480px) {
      .inventory-modal, .order-html-modal {max-height: 98vh;}
      .main {padding: 1vw;}
    }
  </style>
</head>
<body>
<header>
  <div class="header-btns-top" id="headerBtnsTop">
    <button onclick="showOrderHTML()" id="showOrderBtn">ğŸ‘ï¸ Ø¹Ø±Ø¶ Ø£Ù…Ø± Ø§Ù„Ø´Ø±Ø§Ø¡</button>
    <button class="edit-btn" id="editUserBtn" onclick="editClientData()">ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø³ØªØ®Ø¯Ù…â¬…ï¸</button>
    <button id="gotoInventoryBtn" onclick="showInventoryArea()">Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø®Ø²Ù†</button>
    <button id="gotoShopBtn" style="display:none" onclick="hideInventoryArea()">Ø±Ø¬ÙˆØ¹ Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª</button>
  </div>
  <h2>Ù…ØªØ¬Ø± Ø§Ù„Ø¹Ø¬Ø§ÙŠØ¨ÙŠ</h2>
  <p style="margin:0;font-size:18px; font-weight:700; letter-spacing:1px;">Ø¥Ø¯Ø§Ø±Ø© ÙˆØ´Ø±Ø§Ø¡ ÙˆØªØ®Ø²ÙŠÙ† Ø§Ø­ØªØ±Ø§ÙÙŠ</p>
  <!-- Ø±ÙˆØ§Ø¨Ø· Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§ Ø£Ø³ÙÙ„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† -->
  <div style="margin-top:7px;display:flex;justify-content:center;gap:13px;">
    <a href="https://wa.me/201202153265" target="_blank" style="color:#fff;font-size:22px;text-decoration:none;">ÙˆØ§ØªØ³Ø§Ø¨</a>
    <a href="https://www.facebook.com/" target="_blank" style="color:#fff;font-size:22px;text-decoration:none;">ÙÙŠØ³Ø¨ÙˆÙƒ</a>
    <a href="https://twitter.com/" target="_blank" style="color:#fff;font-size:22px;text-decoration:none;">ØªÙˆÙŠØªØ±</a>
    <a href="https://www.instagram.com/" target="_blank" style="color:#fff;font-size:22px;text-decoration:none;">Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…</a>
    <a href="https://t.me/" target="_blank" style="color:#fff;font-size:22px;text-decoration:none;">ØªÙ„ÙŠØ¬Ø±Ø§Ù…</a>
  </div>
</header>
<main class="main">
  <div id="clientSection"></div>
  <div id="notifBar" class="notif-bar"></div>
  <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙˆØ§Ù„Ø³Ù„Ø© -->
  <div id="shopArea">
    <div class="flex" id="shopSection" style="display:none">
      <aside class="filters">
        <h3>ÙÙ„ØªØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h3>
        <div class="filters-btns">
          <button onclick="toggleAllFilters(true)">ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„</button>
          <button onclick="toggleAllFilters(false)">Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙƒÙ„</button>
        </div>
        <div id="dynamicFilters"></div>
        <span class="num-prod" id="numProducts"></span>
        <div class="product-search-container">
          <input type="text" id="productSearch" class="product-search-box" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù…/Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬..." oninput="applyFilters()" />
        </div>
      </aside>
      <section class="products" id="productsList"></section>
    </div>
    <section class="cart-section" id="cartSection" style="display:none">
      <h3>Ø§Ù„Ø£ØµÙ†Ø§Ù Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</h3>
      <table class="cart-table" id="cartTable">
        <thead>
          <tr>
            <th>Ø§Ù„ØµÙ†Ù</th>
            <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
            <th>Ø§Ù„Ø³Ø¹Ø±</th>
            <th>Ø§Ù„Ù‚ÙŠÙ…Ø©</th>
            <th>Ù…Ø³Ø­</th>
          </tr>
        </thead>
        <tbody id="cartItems"></tbody>
      </table>
      <div class="cart-total" id="cartTotal">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: 0 Ø¬.Ù…</div>
      <div class="cart-actions">
        <button onclick="showOrderHTML()" id="cartShowOrderBtn">ğŸ‘ï¸ Ø¹Ø±Ø¶ Ø£Ù…Ø± Ø§Ù„Ø´Ø±Ø§Ø¡</button>
      </div>
    </section>
  </div>
  <!-- Ù…Ù†Ø·Ù‚Ø© Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† -->
  <div id="inventoryArea">
    <div class="inventory-flex">
      <aside class="inventory-filters">
        <h3>ÙÙ„ØªØ±Ø© Ø§Ù„Ø£ØµÙ†Ø§Ù</h3>
        <div class="filters-btns">
          <button onclick="toggleAllInventoryFilters(true)">ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„</button>
          <button onclick="toggleAllInventoryFilters(false)">Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙƒÙ„</button>
        </div>
        <div id="inventoryDynamicFilters"></div>
        <span class="inventory-num-prod" id="inventoryNumProducts"></span>
        <div class="inventory-product-search-container">
          <input type="text" id="inventoryProductSearch" class="inventory-product-search-box" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù…/Ù†ÙˆØ¹ Ø§Ù„ØµÙ†Ù..." oninput="applyInventoryFilters()" />
        </div>
      </aside>
      <div class="inventory-products-area">
        <div class="inventory-controls">
          <button onclick="downloadInventoryExcel()">ØªØ­Ù…ÙŠÙ„ ÙƒÙ€ Excel</button>
          <input type="file" id="excelUpload" accept=".csv" onchange="uploadExcelFile(event)">
        </div>
        <div class="inventory-table-wrapper">
          <table class="inventory-table" id="inventoryTable"></table>
        </div>
        <div class="pagination-bar" id="paginationBar"></div>
        <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„ ÙÙŠ Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø© -->
        <div id="productModal" style="display:none;"></div>
      </div>
    </div>
  </div>
  <!-- Ø´Ø§Ø´Ø© Ø£Ù…Ø± Ø§Ù„Ø´Ø±Ø§Ø¡ -->
  <div class="order-html-modal-bg hidden" id="orderHtmlModalBg">
    <div class="order-html-modal">
      <button class="close-modal" onclick="closeOrderHtmlModal()">Ã—</button>
      <div id="orderHtmlContent"></div>
      <div class="order-modal-btns">
        <button onclick="printOrderHtml()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>
        <button onclick="downloadOrderHtml()">ğŸ’¾ ØªØ­Ù…ÙŠÙ„ HTML</button>
        <button onclick="shareOrderWhatsApp()">ğŸ“± ÙˆØ§ØªØ³Ø§Ø¨</button>
        <button onclick="shareOrderEmail()">âœ‰ï¸ Ø¥ÙŠÙ…ÙŠÙ„</button>
      </div>
    </div>
  </div>
</main>
<footer>
  <div style="text-align:center">ğŸ“§ info@yourcompany.com | ğŸ“ 0500000000</div>
  <div style="text-align:center; margin-top:6px;">
    ØªØ§Ø¨Ø¹Ù†Ø§ Ø¹Ù„Ù‰
    <a href="https://wa.me/201202153265" target="_blank" style="color:#4a7c59;text-decoration:none;">ÙˆØ§ØªØ³Ø§Ø¨</a> -
    <a href="https://www.facebook.com/" target="_blank" style="color:#4a7c59;text-decoration:none;">ÙÙŠØ³Ø¨ÙˆÙƒ</a> -
    <a href="https://twitter.com/" target="_blank" style="color:#4a7c59;text-decoration:none;">ØªÙˆÙŠØªØ±</a> -
    <a href="https://www.instagram.com/" target="_blank" style="color:#4a7c59;text-decoration:none;">Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…</a>
  </div>
  <div style="text-align:center">Â© 2025 Ù…ØªØ¬Ø± Ø§Ù„Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª Ø§Ù„ÙˆØ±Ù‚ÙŠØ©</div>
</footer>
<script>
// ---- Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ùˆ ØªØ®Ø²ÙŠÙ† Ù…ÙˆØ­Ø¯ ----
let productsData = JSON.parse(localStorage.getItem('inventoryData')||'[]').length
  ? JSON.parse(localStorage.getItem('inventoryData'))
  : [
    { id: "d1", name: "Ø¯ÙØªØ± Ø³Ù„Ùƒ 60 ÙˆØ±Ù‚Ø©", price: 7, mainCat: "Ø£Ø¯ÙˆØ§Øª Ù…ÙƒØªØ¨ÙŠØ©", category: "Ø¯ÙØ§ØªØ±", stock: 10, img: "https://i.imgur.com/Vp5j7dH.png" },
    { id: "d2", name: "Ø¯ÙØªØ± Ø¬Ø§Ù…Ø¹ÙŠ 100 ÙˆØ±Ù‚Ø©", price: 13, mainCat: "Ø£Ø¯ÙˆØ§Øª Ù…ÙƒØªØ¨ÙŠØ©", category: "Ø¯ÙØ§ØªØ±", stock: 5, img: "https://i.imgur.com/2Ud9P4q.png" },
    { id: "k1", name: "Ù‚Ù„Ù… Ø£Ø²Ø±Ù‚ Ø¬Ø§Ù", price: 3, mainCat: "Ø£Ø¯ÙˆØ§Øª ÙƒØªØ§Ø¨ÙŠØ©", category: "Ø£Ù‚Ù„Ø§Ù…", stock: 50, img: "https://i.imgur.com/zx9c59V.png" }
  ];

// ---- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (index.html logic) ----
let cart = [];
let clientData = JSON.parse(localStorage.getItem('clientData')||'{}');
let lastSearch = "";

function updateHeaderBtns(show) {
  const headerBtns = document.getElementById('headerBtnsTop');
  if (show) {
    headerBtns.style.opacity = '1';
    headerBtns.style.pointerEvents = 'auto';
    document.getElementById('showOrderBtn').style.display = 'inline-block';
    document.getElementById('editUserBtn').style.display = 'inline-block';
    document.getElementById('gotoInventoryBtn').style.display = 'inline-block';
  } else {
    headerBtns.style.opacity = '0';
    headerBtns.style.pointerEvents = 'none';
    setTimeout(()=>{ // Hide only after fade
      document.getElementById('showOrderBtn').style.display = 'none';
      document.getElementById('editUserBtn').style.display = 'none';
      document.getElementById('gotoInventoryBtn').style.display = 'none';
    }, 180);
  }
}

// 1- Ø§Ø®ÙØ§Ø¡ Ø²Ø±Ø§ÙŠØ± Ø¹Ø±Ø¶ Ø£Ù…Ø± Ø´Ø±Ø§Ø¡ Ùˆ ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø³ØªØ®Ø¯Ù… Ùˆ Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø®Ø²Ù† Ø¹Ù†Ø¯ Ø§Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„
function updateClientCardView() {
  let section = document.getElementById('clientSection');
  if (!clientData.name) {
    section.innerHTML = `<div class="client-form-container client-contact-mid">
      <form class="client-form" id="clientForm" onsubmit="return setClientData();" autocomplete="off" style="display:block">
        <div class="form-title">ØªØ³Ø¬ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„</div>
        <label>Ø§Ù„Ø§Ø³Ù…:<input type="text" id="clientName" required placeholder="Ù…Ø«Ø§Ù„: Ø£Ø­Ù…Ø¯ Ø§Ù„Ø¹Ø¬Ø§ÙŠØ¨ÙŠ"></label>
        <label>Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„:<input type="email" id="clientEmail" required placeholder="example@email.com"></label>
        <label>Ø§Ù„Ù‡Ø§ØªÙ:<input type="tel" id="clientPhone" required placeholder="05XXXXXXXX"></label>
        <label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:<input type="text" id="clientAddress" required placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„Ø±ÙŠØ§Ø¶ - Ø­ÙŠ Ø§Ù„Ø¹Ù„ÙŠØ§"></label>
        <button type="submit" class="to-shop-btn">Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ø·Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</button>
      </form>
    </div>`;
    document.getElementById('shopSection').style.display = 'none';
    document.getElementById('cartSection').style.display = 'none';
    updateHeaderBtns(false);
  } else {
    section.innerHTML = `<div class="client-card client-contact-mid">
      <button class="edit-btn" onclick="editClientData()">ØªØ¹Ø¯ÙŠÙ„</button>
      <h3>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„</h3>
      <div><label>Ø§Ù„Ø§Ø³Ù…:</label><span class="val">${clientData.name}</span></div>
      <div><label>Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„:</label><span class="val">${clientData.email}</span></div>
      <div><label>Ø§Ù„Ù‡Ø§ØªÙ:</label><span class="val">${clientData.phone}</span></div>
      <div><label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</label><span class="val">${clientData.address}</span></div>
    </div>`;
    document.getElementById('shopSection').style.display = 'flex';
    document.getElementById('cartSection').style.display = 'block';
    buildFilterGroups();
    renderProducts();
    updateCart();
    setTimeout(()=>{ section.innerHTML = ""; }, 400);
    updateHeaderBtns(true);
  }
}

function setClientData() {
  let name = document.getElementById('clientName').value.trim();
  let email = document.getElementById('clientEmail').value.trim();
  let phone = document.getElementById('clientPhone').value.trim();
  let address = document.getElementById('clientAddress').value.trim();
  if (!name || !email || !phone || !address) {
    notif('ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© ÙƒÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„!', "#c0392b");
    return false;
  }
  clientData = {name, email, phone, address};
  localStorage.setItem('clientData', JSON.stringify(clientData));
  updateClientCardView();
  return false;
}
function editClientData() {
  document.getElementById('clientSection').innerHTML = `<div class="client-form-container client-contact-mid">
    <form class="client-form" id="clientForm" onsubmit="return setClientData();" autocomplete="off" style="display:block">
      <div class="form-title">ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„</div>
      <label>Ø§Ù„Ø§Ø³Ù…:<input type="text" id="clientName" value="${clientData.name||""}" required></label>
      <label>Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„:<input type="email" id="clientEmail" value="${clientData.email||""}" required></label>
      <label>Ø§Ù„Ù‡Ø§ØªÙ:<input type="tel" id="clientPhone" value="${clientData.phone||""}" required></label>
      <label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:<input type="text" id="clientAddress" value="${clientData.address||""}" required></label>
      <button type="submit" class="to-shop-btn">Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ø·Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</button>
    </form>
  </div>`;
  document.getElementById('shopSection').style.display = 'none';
  document.getElementById('cartSection').style.display = 'none';
  updateHeaderBtns(false);
}
let notifTimeout = null;
function notif(msg, color="#c0392b") {
  const bar = document.getElementById('notifBar');
  bar.textContent = msg;
  bar.style.background = color;
  bar.classList.add('visible');
  clearTimeout(notifTimeout);
  notifTimeout = setTimeout(()=>bar.classList.remove('visible'), 2500);
}
// ==== Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© ====
// ... (Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ±)
let shopFilters = {checked: {}, search: ""}; // Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙÙ‚Ø·
function buildFilterGroups() {
  let groups = {};
  productsData.forEach(p=>{
    if(!groups[p.mainCat]) groups[p.mainCat]=[];
    if(!groups[p.mainCat].includes(p.category)) groups[p.mainCat].push(p.category);
  });
  let filters = ``;
  Object.entries(groups).forEach(([mainCat, subs],i)=>{
    let subFilt = subs.map(sub=>{
      let sum = productsData.filter(x=>x.category===sub).reduce((a,b)=>a+b.stock,0);
      let checked = (shopFilters.checked[sub] !== false) ? "checked" : "";
      return `<label>
        <input type="checkbox" class="sub-cat-chk" data-main="${mainCat}" value="${sub}" ${checked} onchange="applyFilters()"> 
        ${sub} <span style="color:#388e3c;font-weight:bold;font-size:13px;">(${sum})</span>
      </label>`;
    }).join("");
    filters += `<div class="filter-group">
      <div class="filter-main" onclick="toggleFilterGroup(this)">
        <span class="toggle">+</span>
        <span class="main-label">${mainCat}</span>
      </div>
      <div class="sub-filters">${subFilt}</div>
    </div>`;
  });
  document.getElementById('dynamicFilters').innerHTML = filters;
  let firstGroup = document.querySelector('.filter-group .sub-filters');
  if(firstGroup){ firstGroup.classList.add('active'); firstGroup.previousElementSibling.querySelector('.toggle').textContent = '-'; }
}
function toggleFilterGroup(el){
  let sub = el.nextElementSibling;
  if(sub.classList.contains('active')){
    sub.classList.remove('active');
    el.querySelector('.toggle').textContent = '+';
  } else {
    sub.classList.add('active');
    el.querySelector('.toggle').textContent = '-';
  }
}
function toggleAllFilters(val){
  document.querySelectorAll('.sub-cat-chk').forEach(chk=>{
    chk.checked = val;
    shopFilters.checked[chk.value] = val;
  });
  applyFilters();
}
function applyFilters() {
  shopFilters.checked = {};
  document.querySelectorAll('.sub-cat-chk').forEach(chk=>{
    shopFilters.checked[chk.value] = chk.checked;
  });
  renderProducts();
}
// ==== Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ====
// ... (Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ±)
function renderProducts() {
  let productsList = document.getElementById('productsList');
  productsList.innerHTML = "";
  // Ø²Ø± Ø±Ø¬ÙˆØ¹ Ùˆ Ø²Ø± Ø¹Ø±Ø¶ Ø£Ù…Ø± Ø§Ù„Ø´Ø±Ø§Ø¡ Ø£Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙŠØ³Ø§Ø±
  let backBtn = document.createElement("button");
  backBtn.className = "back-btn";
  backBtn.onclick = function() {
    document.getElementById('clientSection').innerHTML = `<div class="client-card client-contact-mid">
      <button class="edit-btn" onclick="editClientData()">ØªØ¹Ø¯ÙŠÙ„</button>
      <h3>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„</h3>
      <div><label>Ø§Ù„Ø§Ø³Ù…:</label><span class="val">${clientData.name}</span></div>
      <div><label>Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„:</label><span class="val">${clientData.email}</span></div>
      <div><label>Ø§Ù„Ù‡Ø§ØªÙ:</label><span class="val">${clientData.phone}</span></div>
      <div><label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</label><span class="val">${clientData.address}</span></div>
    </div>`;
    document.getElementById('shopSection').style.display = 'none';
    document.getElementById('cartSection').style.display = 'none';
    updateHeaderBtns(false);
  };
  let showOrderBtn = document.createElement("button");
  showOrderBtn.className = "show-order-btn";
  showOrderBtn.onclick = function() { showOrderHTML(); };
  let toInventoryBtn = document.createElement("button");
  //toInventoryBtn.className = "to-inventory-btn";
  //toInventoryBtn.innerHTML = "  ";
  toInventoryBtn.onclick = showInventoryArea;
  productsList.appendChild(backBtn);
  productsList.appendChild(showOrderBtn);
  productsList.appendChild(toInventoryBtn);
  // Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø¨Ø­Ø«
  let searchBox = document.getElementById('productSearch');
  let search = searchBox ? searchBox.value.trim() : "";
  let checkedSubs = [];
  document.querySelectorAll('.sub-cat-chk').forEach(chk=>{
    if(chk.checked) checkedSubs.push(chk.value);
  });
  let count = 0;
  productsData.forEach(prod => {
    let matchSearch = true;
    if (search) {
      let s = search.toLowerCase();
      matchSearch = (prod.name && prod.name.toLowerCase().includes(s)) ||
        (prod.category && prod.category.toLowerCase().includes(s));
    }
    if (checkedSubs.includes(prod.category) && matchSearch) {
      count++;
      const div = document.createElement('div');
      div.className = 'product';
      div.innerHTML =
        `<img src="${prod.img}" alt="${prod.name}"/>
         <h4>${prod.name}</h4>
         <div class="price">${prod.price} Ø¬.Ù…</div>
         <div class="${prod.stock > 0 ? 'in-stock' : 'not-available'}">
           ${prod.stock > 0 ? prod.stock+' Ù…ØªÙˆÙØ±' : 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}
         </div>
         <div class="qty-row">
           <input type="number" min="1" max="${prod.stock}" value="1" id="qty_${prod.id}" ${prod.stock === 0 ? 'disabled' : ''}>
         </div>
         <button onclick="addToCart('${prod.id}')" ${prod.stock === 0 ? 'disabled' : ''}>${prod.stock > 0 ? 'Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©' : 'ØºÙŠØ± Ù…ØªØ§Ø­'}</button>`;
      productsList.appendChild(div);
    }
  });
  document.getElementById('numProducts').textContent = `Ø¹Ø¯Ø¯ Ø§Ù„Ø£ØµÙ†Ø§Ù Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø©: ${count}`;
}
function addToCart(prodId) {
  const prod = productsData.find(p=>p.id===prodId);
  if (!prod) return;
  const qtyInput = document.getElementById('qty_' + prodId);
  let qty = parseInt(qtyInput.value);
  if (isNaN(qty) || qty < 1) return notif("Ø§Ù„ÙƒÙ…ÙŠØ© ØºÙŠØ± ØµØ­ÙŠØ­Ø©", "#c0392b");
  if (qty > prod.stock) return notif("Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ù…ØªÙˆÙØ±!", "#c0392b");
  const existing = cart.find(i=>i.id===prodId);
  if (existing) {
    if (existing.qty + qty > prod.stock) return notif("Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ù…ØªÙˆÙØ±!", "#c0392b");
    existing.qty += qty;
  } else {
    cart.push({ ...prod, qty });
  }
  updateCart();
  notif("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ø³Ù„Ø©.", "#388e3c");
}
// ==== Ø§Ù„Ø³Ù„Ø© ====
// ... (Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ±)
function updateCart() {
  const tb = document.getElementById('cartItems');
  tb.innerHTML = '';
  let total = 0;
  cart.forEach((item, idx) => {
    const val = item.price * item.qty;
    total += val;
    const row = document.createElement('tr');
    row.innerHTML =
      `<td>${item.name}</td>
       <td>${item.qty}</td>
       <td>${item.price} Ø¬.Ù…</td>
       <td>${val} Ø¬.Ù…</td>
       <td><button onclick="removeFromCart(${idx})">X</button></td>`;
    tb.appendChild(row);
  });
  document.getElementById('cartTotal').textContent = "Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: " + total + " Ø¬.Ù…";
}
function removeFromCart(idx) {
  cart.splice(idx, 1);
  updateCart();
}
// ==== Ø£Ù…Ø± Ø§Ù„Ø´Ø±Ø§Ø¡ ====
// 6- Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¬Ø± Ø£Ø³ÙÙ„ Ø£Ù…Ø± Ø§Ù„Ø´Ø±Ø§Ø¡
function getCurrentDateTimeStr() {
  const d = new Date();
  return d.toLocaleDateString('ar-EG') + " - " + d.toLocaleTimeString('ar-EG', {hour: '2-digit', minute: '2-digit'});
}
function showOrderHTML() {
  if (cart.length === 0) { notif("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©!", "#c0392b"); return; }
  const total = cart.reduce((sum, item)=>sum+(item.price*item.qty), 0);
  const nowStr = getCurrentDateTimeStr();
  let html = `<h3>Ø£Ù…Ø± Ø´Ø±Ø§Ø¡ - Ù…ØªØ¬Ø± Ø§Ù„Ø¹Ø¬Ø§ÙŠØ¨ÙŠ</h3>
    <div class="order-date">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ù„Ø¨: ${nowStr}</div>
    <div class="order-customer">
      <b>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„:</b> ${clientData.name}<br>
      <b>Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„:</b> ${clientData.email}<br>
      <b>Ø§Ù„Ù‡Ø§ØªÙ:</b> ${clientData.phone}<br>
      <b>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</b> ${clientData.address}
    </div>
    <table>
    <thead>
      <tr>
        <th>Ø§Ù„ØµÙ†Ù</th><th>Ø§Ù„ÙƒÙ…ÙŠØ©</th><th>Ø§Ù„Ø³Ø¹Ø±</th><th>Ø§Ù„Ù‚ÙŠÙ…Ø©</th>
      </tr>
    </thead><tbody>`;
  cart.forEach(item => {
    html += `<tr>
      <td>${item.name}</td>
      <td>${item.qty}</td>
      <td>${item.price} Ø¬.Ù…</td>
      <td>${item.price*item.qty} Ø¬.Ù…</td>
    </tr>`;
  });
  html += `<tr class="total-row"><td colspan="3">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ</td><td>${total} Ø¬.Ù…</td></tr>`;
  html += `</tbody></table>`;
  html += `<div style="text-align:center;font-size:16px;margin-top:7px;color:#4a7c59;font-weight:bold">
    Ø´ÙƒØ±Ø§Ù‹ Ù„Ø§Ø®ØªÙŠØ§Ø±ÙƒÙ… Ù…ØªØ¬Ø± Ø§Ù„Ø¹Ø¬Ø§ÙŠØ¨ÙŠ
  </div>
  <div style="text-align:center;margin-top:6px;">
    <b>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¬Ø±:</b> <br> 
    ğŸ“§ info@yourcompany.com | ğŸ“ 0500000000 <br>
    ØªØ§Ø¨Ø¹Ù†Ø§ Ø¹Ù„Ù‰: 
    <a href="https://wa.me/201202153265" target="_blank" style="color:#25764b;text-decoration:none;font-weight:700;">ÙˆØ§ØªØ³Ø§Ø¨</a> - 
    <a href="https://www.facebook.com/" target="_blank" style="color:#25764b;text-decoration:none;font-weight:700;">ÙÙŠØ³Ø¨ÙˆÙƒ</a> - 
    <a href="https://twitter.com/" target="_blank" style="color:#25764b;text-decoration:none;font-weight:700;">ØªÙˆÙŠØªØ±</a> - 
    <a href="https://www.instagram.com/" target="_blank" style="color:#25764b;text-decoration:none;font-weight:700;">Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…</a>
  </div>`;
  document.getElementById('orderHtmlContent').innerHTML = html;
  document.getElementById('orderHtmlModalBg').classList.remove('hidden');
}
function closeOrderHtmlModal() {
  document.getElementById('orderHtmlModalBg').classList.add('hidden');
}
function printOrderHtml() {
  const content = document.getElementById('orderHtmlContent').innerHTML;
  const win = window.open('', '', 'width=900,height=900');
  win.document.write(`<html><head><title>Ø£Ù…Ø± Ø´Ø±Ø§Ø¡ - Ù…ØªØ¬Ø± Ø§Ù„Ø¹Ø¬Ø§ÙŠØ¨ÙŠ</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap" rel="stylesheet">
  <style>body{font-family:'Cairo',Arial,sans-serif;direction:rtl;padding:25px;}table{width:100%;border-collapse:collapse;font-size:18px;}th,td{border:1.5px solid #b2dfdb;padding:13px 10px;text-align:center;}th{background:#4a7c59;color:#fff;font-size:20px;}</style>
  </head><body>${content}</body></html>`);
  win.document.close();
  setTimeout(() => win.print(), 500);
}
function downloadOrderHtml() {
  const content = document.getElementById('orderHtmlContent').innerHTML;
  const htmlPage = `<html><head><meta charset="utf-8"><title>Ø£Ù…Ø± Ø´Ø±Ø§Ø¡</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap" rel="stylesheet">
  <style>
    body{font-family:'Cairo',Arial,sans-serif;direction:rtl;padding:25px;}
    .order-date{font-size:16px;color:#444;}
    .order-customer{background:#f2f8f3;border-radius:7px;padding:13px 10px;margin-bottom:10px;font-size:17px;}
    table{width:100%;border-collapse:collapse;font-size:18px;}
    th,td{border:1.5px solid #b2dfdb;padding:13px 10px;text-align:center;}
    th{background:#4a7c59;color:#fff;font-size:20px;}
    .total-row td{font-weight:bold;font-size:20px;color:#c0392b;background:#f7f7f7;}
  </style>
  </head><body>${content}</body></html>`;
  const blob = new Blob([htmlPage], {type: "text/html"});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = "Ø·Ù„Ø¨_Ø´Ø±Ø§Ø¡.html";
  a.click();
}
function shareOrderWhatsApp() {
  const total = cart.reduce((sum, item)=>sum+(item.price*item.qty), 0);
  const message =
    `Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£ÙˆØ¯ Ø·Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©:\n` +
    cart.map(item => `${item.name} - ${item.qty} Ã— ${item.price} Ø¬.Ù…`).join('\n') +
    `\nØ§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${total} Ø¬.Ù…\n\nØ¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„:\nØ§Ù„Ø§Ø³Ù…: ${clientData.name}\nØ§Ù„Ù‡Ø§ØªÙ: ${clientData.phone}\nØ§Ù„Ø¹Ù†ÙˆØ§Ù†: ${clientData.address}`;
  const whatsappUrl = `https://wa.me/201202153265?text=${encodeURIComponent(message)}`;
  window.open(whatsappUrl, '_blank');
}
function shareOrderEmail() {
  const total = cart.reduce((sum, item)=>sum+(item.price*item.qty), 0);
  const subject = "Ø·Ù„Ø¨ Ø´Ø±Ø§Ø¡ Ù…Ù† Ù…ØªØ¬Ø± Ø§Ù„Ø¹Ø¬Ø§ÙŠØ¨ÙŠ";
  const body =
    `Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ…ØŒ\nØ£ÙˆØ¯ Ø·Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©:\n` +
    cart.map(item => `${item.name} - ${item.qty} Ã— ${item.price} Ø¬.Ù…`).join('\n') +
    `\nØ§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${total} Ø¬.Ù…\n\nØ¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„:\nØ§Ù„Ø§Ø³Ù…: ${clientData.name}\nØ§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ: ${clientData.email}\nØ§Ù„Ù‡Ø§ØªÙ: ${clientData.phone}\nØ§Ù„Ø¹Ù†ÙˆØ§Ù†: ${clientData.address}\n\nÙ…Ø¹ Ø§Ù„Ø´ÙƒØ±.`;
  const mailtoLink = `mailto:info@yourcompany.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
  window.open(mailtoLink, '_blank');
}

// ==== Ø´Ø§Ø´Ø© Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø®Ø²Ù† ====
// 3- Ø¥Ø®ÙØ§Ø¡ Ø²Ø±Ø§Ø± Ø¹Ø±Ø¶ Ø£Ù…Ø± Ø§Ù„Ø´Ø±Ø§Ø¡ Ùˆ Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø®Ø²Ù† Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
function showInventoryArea() {
  document.getElementById('shopArea').style.display = 'none';
  document.getElementById('inventoryArea').style.display = 'block';
  document.getElementById('gotoInventoryBtn').style.display = 'none';
  document.getElementById('gotoShopBtn').style.display = 'inline-block';
  document.getElementById('editUserBtn').style.display = 'none';
  document.getElementById('showOrderBtn').style.display = 'none';
  // Ø£ÙŠØ¶Ø§Ù‹ Ø²Ø± Ø¹Ø±Ø¶ Ø£Ù…Ø± Ø§Ù„Ø´Ø±Ø§Ø¡ ÙÙŠ Ø§Ù„Ø³Ù„Ø©
  let cartShowOrderBtn = document.getElementById('cartShowOrderBtn');
  if(cartShowOrderBtn) cartShowOrderBtn.style.display = "none";
  buildInventoryFilterGroups();
  applyInventoryFilters();
}
function hideInventoryArea() {
  document.getElementById('shopArea').style.display = 'block';
  document.getElementById('inventoryArea').style.display = 'none';
  document.getElementById('gotoInventoryBtn').style.display = 'inline-block';
  document.getElementById('gotoShopBtn').style.display = 'none';
  document.getElementById('editUserBtn').style.display = 'inline-block';
  document.getElementById('showOrderBtn').style.display = 'inline-block';
  let cartShowOrderBtn = document.getElementById('cartShowOrderBtn');
  if(cartShowOrderBtn) cartShowOrderBtn.style.display = "inline-block";
  buildFilterGroups();
  renderProducts();
  updateCart();
}
// ==== Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ù…Ø¹ Ø§Ù„ÙÙ„ØªØ±Ø© ÙˆØ§Ù„Ø¨Ø­Ø« ÙˆØªØ±Ù‚ÙŠÙ… Ø§Ù„ØµÙØ­Ø§Øª ====
// ... (Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ±)
let inventoryFilters = {checked: {}, search: ""};
function buildInventoryFilterGroups() {
  let groups = {};
  productsData.forEach(p=>{
    if(!groups[p.mainCat]) groups[p.mainCat]=[];
    if(!groups[p.mainCat].includes(p.category)) groups[p.mainCat].push(p.category);
  });
  let filters = ``;
  Object.entries(groups).forEach(([mainCat, subs],i)=>{
    let subFilt = subs.map(sub=>{
      let sum = productsData.filter(x=>x.category===sub).reduce((a,b)=>a+b.stock,0);
      let checked = (inventoryFilters.checked[sub] !== false) ? "checked" : "";
      return `<label>
        <input type="checkbox" class="inventory-sub-cat-chk" data-main="${mainCat}" value="${sub}" ${checked} onchange="applyInventoryFilters()"> 
        ${sub} <span style="color:#388e3c;font-weight:bold;font-size:13px;">(${sum})</span>
      </label>`;
    }).join("");
    filters += `<div class="filter-group">
      <div class="filter-main" onclick="toggleInventoryFilterGroup(this)">
        <span class="toggle">+</span>
        <span class="main-label">${mainCat}</span>
      </div>
      <div class="sub-filters">${subFilt}</div>
    </div>`;
  });
  document.getElementById('inventoryDynamicFilters').innerHTML = filters;
  let firstGroup = document.querySelector('#inventoryDynamicFilters .filter-group .sub-filters');
  if(firstGroup){ firstGroup.classList.add('active'); firstGroup.previousElementSibling.querySelector('.toggle').textContent = '-'; }
}
function toggleInventoryFilterGroup(el){
  let sub = el.nextElementSibling;
  if(sub.classList.contains('active')){
    sub.classList.remove('active');
    el.querySelector('.toggle').textContent = '+';
  } else {
    sub.classList.add('active');
    el.querySelector('.toggle').textContent = '-';
  }
}
function toggleAllInventoryFilters(val){
  document.querySelectorAll('.inventory-sub-cat-chk').forEach(chk=>{
    chk.checked = val;
    inventoryFilters.checked[chk.value] = val;
  });
  applyInventoryFilters();
}
function applyInventoryFilters() {
  inventoryFilters.checked = {};
  document.querySelectorAll('.inventory-sub-cat-chk').forEach(chk=>{
    inventoryFilters.checked[chk.value] = chk.checked;
  });
  renderInventoryTable();
}
let pageSize = 50;
let currentPage = 1;
function renderInventoryTable() {
  let checkedSubs = [];
  document.querySelectorAll('.inventory-sub-cat-chk').forEach(chk=>{
    if(chk.checked) checkedSubs.push(chk.value);
  });
  let searchBox = document.getElementById('inventoryProductSearch');
  let search = searchBox ? searchBox.value.trim() : "";
  let filtered = productsData.filter(prod=>{
    let matchSearch = true;
    if (search) {
      let s = search.toLowerCase();
      matchSearch = (prod.name && prod.name.toLowerCase().includes(s)) ||
        (prod.category && prod.category.toLowerCase().includes(s));
    }
    return checkedSubs.includes(prod.category) && matchSearch;
  });
  let count = filtered.length;
  document.getElementById('inventoryNumProducts').textContent = `Ø¹Ø¯Ø¯ Ø§Ù„Ø£ØµÙ†Ø§Ù Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø©: ${count}`;
  let totalPages = Math.max(1, Math.ceil(filtered.length / pageSize));
  if (currentPage > totalPages) currentPage = totalPages;
  let start = (currentPage - 1) * pageSize;
  let pageProducts = filtered.slice(start, start + pageSize);
  let html = `<tr>
    <th>ØµÙˆØ±Ø©</th>
    <th>Ø§Ù„Ø§Ø³Ù…</th>
    <th>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</th>
    <th>Ø§Ù„ÙƒÙˆØ¯/Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„ØµÙ†Ù</th>
    <th>Ø§Ù„Ø³Ø¹Ø±</th>
    <th>Ø§Ù„Ø±ØµÙŠØ¯</th>
  </tr>`;
  pageProducts.forEach((prod,i) => {
    html += `<tr>
      <td><img src="${prod.img||'https://via.placeholder.com/44x36?text=Ù…Ù†ØªØ¬'}" /></td>
      <td>${prod.name}</td>
      <td>${prod.mainCat}</td>
      <td>${prod.category}</td>
      <td>${prod.price}</td>
      <td>${prod.stock}</td>
    </tr>`;
  });
  document.getElementById('inventoryTable').innerHTML = html;
  renderPagination(filtered.length);
}
function renderPagination(totalLen) {
  let totalPages = Math.max(1, Math.ceil(totalLen / pageSize));
  let html = '';
  if (totalPages > 1) {
    html += `<button ${currentPage==1?'disabled':''} onclick="gotoPage(1)">Ø§Ù„Ø£ÙˆÙ„Ù‰</button>`;
    html += `<button ${currentPage==1?'disabled':''} onclick="gotoPage(${currentPage-1})">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>`;
    let min = Math.max(1, currentPage-2), max = Math.min(totalPages, currentPage+2);
    for(let p=min;p<=max;p++) {
      html += `<button class="${p==currentPage?'active':''}" onclick="gotoPage(${p})">${p}</button>`;
    }
    html += `<button ${currentPage==totalPages?'disabled':''} onclick="gotoPage(${currentPage+1})">Ø§Ù„ØªØ§Ù„ÙŠ</button>`;
    html += `<button ${currentPage==totalPages?'disabled':''} onclick="gotoPage(${totalPages})">Ø§Ù„Ø£Ø®ÙŠØ±Ø©</button>`;
    html += `<span>ØµÙØ­Ø© ${currentPage} Ù…Ù† ${totalPages}</span>`;
  }
  document.getElementById('paginationBar').innerHTML = html;
}
function gotoPage(p) {
  currentPage = p;
  renderInventoryTable();
}
// 2- Ø´Ø§Ø´Ø© Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„ ØµÙ†Ù: Ø¶Ø¨Ø· Ø§Ù„Ø­Ø¬Ù… Ù…Ø¹ Ø³ÙƒØ±ÙˆÙ„ Ø¬Ø§Ù†Ø¨ÙŠ Ø¹Ù†Ø¯ ØµØºØ± Ø§Ù„Ø´Ø§Ø´Ø©
function openProductModal(idx = null) {
  let p = idx !== null ? productsData[idx] : {};
  let modal = document.getElementById('productModal');
  modal.innerHTML = `
    <div class="inventory-modal-bg" onclick="if(event.target===this)closeProductModal()">
      <div class="inventory-modal">
        <button class="close-modal" type="button" onclick="closeProductModal()">&times;</button>
        <form class="inventory-add-edit-form" id="addEditProductForm" onsubmit="return saveProductFormModal();">
          <h2 style="margin-top:0;">${idx!==null ? "ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØµÙ†Ù" : "Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù Ø¬Ø¯ÙŠØ¯"}</h2>
          <label>Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù<input type="text" id="prodName" required value="${p.name||''}"></label>
          <label>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©<input type="text" id="prodMainCat" placeholder="Ù…Ø«Ø§Ù„: Ø£Ø¯ÙˆØ§Øª Ù…ÙƒØªØ¨ÙŠØ©" required value="${p.mainCat||''}"></label>
          <label>Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„ØµÙ†Ù (Ø§Ù„ÙƒÙˆØ¯)<input type="text" id="prodCat" placeholder="Ù…Ø«Ø§Ù„: Ø¯ÙØ§ØªØ±" required value="${p.category||''}"></label>
          <label>Ø§Ù„Ø³Ø¹Ø±<input type="number" id="prodPrice" min="0" step="0.5" required value="${typeof p.price==='number'?p.price:''}"></label>
          <label>Ø§Ù„Ø±ØµÙŠØ¯<input type="number" id="prodStock" min="0" required value="${typeof p.stock==='number'?p.stock:''}"></label>
          <label>Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬<input type="url" id="prodImg" placeholder="https://..." value="${p.img||''}" ></label>
          <div class="modal-btns">
            <button type="submit" id="saveProdBtn">Ø­ÙØ¸</button>
            <button type="button" onclick="closeProductModal()">Ø¥Ù„ØºØ§Ø¡</button>
          </div>
          <input type="hidden" id="prodIdx" value="${idx!==null?idx:""}">
        </form>
      </div>
    </div>
  `;
  modal.style.display = "block";
  setTimeout(()=>{
    let n = document.getElementById('prodName');
    if(n) n.focus();
  },120);
}
function closeProductModal() {
  document.getElementById('productModal').style.display = "none";
  document.getElementById('productModal').innerHTML = '';
}
function saveProductFormModal() {
  const name = document.getElementById('prodName').value.trim();
  const mainCat = document.getElementById('prodMainCat').value.trim();
  const cat = document.getElementById('prodCat').value.trim();
  const price = parseFloat(document.getElementById('prodPrice').value);
  const stock = parseInt(document.getElementById('prodStock').value);
  const img = document.getElementById('prodImg').value.trim() || "https://via.placeholder.com/200x150?text=Ù…Ù†ØªØ¬";
  const idx = document.getElementById('prodIdx').value;
  if (name && mainCat && cat && !isNaN(price) && !isNaN(stock)) {
    if (idx !== '') {
      productsData[idx] = { ...productsData[idx], name, mainCat, category: cat, price, stock, img };
      notif("ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØµÙ†Ù Ø¨Ù†Ø¬Ø§Ø­", "#388e3c");
    } else {
      productsData.push({ id: "id" + Date.now(), name, mainCat, category: cat, price, stock, img });
      notif("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙ†Ù Ø¨Ù†Ø¬Ø§Ø­", "#388e3c");
    }
    saveInventoryData();
    buildFilterGroups();
    renderProducts();
    buildInventoryFilterGroups();
    renderInventoryTable();
    closeProductModal();
  }
  return false;
}
function saveInventoryData() {
  localStorage.setItem('inventoryData', JSON.stringify(productsData));
}
function deleteProduct(i) {
  if (confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ØµÙ†ÙØŸ")) {
    productsData.splice(i,1);
    saveInventoryData();
    buildFilterGroups();
    renderProducts();
    buildInventoryFilterGroups();
    renderInventoryTable();
  }
}
function deleteAllProducts() {
  if (confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ØµÙ†Ø§ÙØŸ")) {
    productsData = [];
    saveInventoryData();
    buildFilterGroups();
    renderProducts();
    buildInventoryFilterGroups();
    renderInventoryTable();
    notif("ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ØµÙ†Ø§Ù", "#c0392b");
  }
}
function downloadInventoryExcel() {
  let csv = "Ø§Ù„Ø§Ø³Ù…,Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ,Ø§Ù„ÙƒÙˆØ¯,Ø§Ù„Ø³Ø¹Ø±,Ø§Ù„Ø±ØµÙŠØ¯,Ø§Ù„ØµÙˆØ±Ø©\n";
  productsData.forEach(p=>csv+=`${p.name},${p.mainCat},${p.category},${p.price},${p.stock},${p.img}\n`);
  let blob = new Blob(["\uFEFF"+csv], {type: "text/csv;charset=utf-8;"}); // BOM for Arabic
  let a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = "Ø§Ù„Ù…Ø®Ø²ÙˆÙ†.csv"; a.click();
  notif("ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù Ø¨Ù†Ø¬Ø§Ø­","#388e3c");
}
function uploadExcelFile(e) {
  const file = e.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = function(ev) {
    const lines = ev.target.result.split('\n').filter(Boolean);
    productsData = [];
    for (let i=1; i<lines.length; i++) {
      const [name, mainCat, cat, price, stock, img] = lines[i].split(',');
      if(!name||!mainCat||!cat) continue;
      productsData.push({id:"id"+Date.now()+i,name,mainCat,category:cat,price:+price,stock:+stock,img:img||"https://via.placeholder.com/200x150?text=Ù…Ù†ØªØ¬"});
    }
    saveInventoryData();
    buildFilterGroups();
    renderProducts();
    buildInventoryFilterGroups();
    renderInventoryTable();
    notif("ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ØµÙ†Ø§Ù Ù…Ù† Ù…Ù„Ù Excel Ø¨Ù†Ø¬Ø§Ø­", "#388e3c");
  };
  reader.readAsText(file,'utf-8');
}
// --- Ø¨Ø¯Ø¡ Ø§Ù„ØµÙØ­Ø© ---
window.onload = function() {
  updateClientCardView();
  buildFilterGroups();
  renderProducts();
  updateCart();
  buildInventoryFilterGroups();
  document.getElementById('shopArea').style.display = 'block';
  document.getElementById('inventoryArea').style.display = 'none';
  document.getElementById('gotoInventoryBtn').style.display = 'inline-block';
  document.getElementById('gotoShopBtn').style.display = 'none';
  updateHeaderBtns(!(!clientData.name));
};
</script>
</body>
</html>